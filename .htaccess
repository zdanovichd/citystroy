ErrorDocument 404 /pages/404.php

Options +FollowSymLinks
RewriteEngine On

RewriteRule ^tekhnologicheskoe-proektirovanie$ /pages/tehno.php [L]
RewriteRule ^dizajn-kommercheskih-pomeshchenij$ /pages/design.php [L]
RewriteRule ^inzhenernoe-proektirovanie$ /pages/project.php [L]
RewriteRule ^proekty$ /pages/portfolio.php [L]
RewriteRule ^remont-kommercheskih-pomeshchenij$ /pages/SMR.php [L]
RewriteRule ^contacts$ /pages/contact.php [L]

# Технические страницы
RewriteRule ^privacy-policy$ /pages/privacy-policy.php [L]
RewriteRule ^assent-policy$ /pages/assent.php [L]
RewriteRule ^terms-of-service$ /pages/terms-of-service.php [L]
RewriteRule ^rekvizity$ /pages/rekvizity.php [L]
RewriteRule ^o-kompanii$ /pages/o-kompanii.php [L]
RewriteRule ^sertifikaty$ /pages/sertifikaty.php [L]
RewriteRule ^vakansii$ /pages/vakansii.php [L]
RewriteRule ^blog$ /pages/blog.php [L]
RewriteRule ^faq$ /pages/faq.php [L]
RewriteRule ^prices$ /pages/prices.php [L]
RewriteRule ^partners$ /pages/partners.php [L]
RewriteRule ^otzyvy$ /pages/otzyvy.php [L]
RewriteRule ^garantii$ /pages/garantii.php [L]
RewriteRule ^remont-restoranov-i-kafe$ /pages/remont-restoranov-i-kafe.php [L]
RewriteRule ^remont-ofisov-pod-klyuch$ /pages/remont-ofisov-pod-klyuch.php [L]
RewriteRule ^remont-boulingov$ /pages/remont-boulingov.php [L]

#Редиректы
Redirect 301 /дизайн /dizajn-kommercheskih-pomeshchenij
Redirect 301 /технология /tekhnologicheskoe-proektirovanie
Redirect 301 /СМР /smr
Redirect 301 /портфолио /proekty
Redirect 301 /инженерия /inzhenernoe-proektirovanie
Redirect 301 /главная /
Redirect 301 /контакты /contacts
Redirect 301 /pages/case/il_&_geo.php /
Redirect 301 /assets/icon/que.svg /
Redirect 301 /assets/img/cart/ch/8.jpg.webp /
Redirect 301 /assets/img/cart/ch/9.jpg.webp /
Redirect 301 /case/youtube.com/watch?v=wTNcoZMLzFc&ab_channel=СИТИСТРОЙ /
Redirect 301 /assets/img/blue_logo_swiper/25.png.webp /

#  <Directory /var/www/html/citystroy.local/>
#        AllowOverride All
#    </Directory>

# SEO редиректы
# Перенаправляет с зеркал где больше 1 слеша. /// (Вариант 1)

RewriteCond %{THE_REQUEST} //
RewriteRule ^(.*?)/*$ https://%{HTTP_HOST}/$1 [R=301,L]

RewriteCond %{REQUEST_URI} ^(.+)/$
RewriteRule ^(.*?)/*$ https://%{HTTP_HOST}/$1 [R=301,L]


# Принудительный редирект на HTTPS (и убираем WWW)
RewriteCond %{HTTP_HOST} ^www\.(.*)$
RewriteRule ^(.*)$ https://%1/$1 [L,R=301]

RewriteCond %{HTTPS} off
RewriteCond %{HTTP:X-Forwarded-Proto} !https
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# Убираем index.php и index.html, но не сохраняем конечный слэш (кроме главной)
RewriteCond %{REQUEST_URI} ^(.+)/index\.(php|html)$ [NC]
RewriteRule ^(.+)/index\.(php|html)$ https://%{HTTP_HOST}/$1 [R=301,L]

# Специальное правило для главной страницы Убираем index.php и index.html.
RewriteCond %{THE_REQUEST} /index\.(php|html) [NC]
RewriteRule ^index\.(php|html)$ https://%{HTTP_HOST} [R=301,L]